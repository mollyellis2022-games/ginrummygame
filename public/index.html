<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <meta name="theme-color" content="#5a7cff">


  <link rel="manifest" href="/manifest.json">




  <title>Gin Rummy</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <!----------- LOADING SCREEN ------------>

  <div id="screen-loading" class="screen">
    <div class="loading-wrap">
      <div class="logo">GIN<br>RUMMY</div>
      <div class="dots" id="loadingMessage">Connecting...</div>
    </div>
  </div>


  <!----------- HOME SCREEN ------------>

    <section id="screen-home" class="home-screen">

  <!-- TOP BAR -->
  <header class="home-appbar">
    <!-- Left -->
    <div class="appbar-left">
      <button class="home-profile-btn" id="homeProfileBtn" type="button" aria-label="Profile">
        <span class="home-game-profile-icon">
          <img id="homeAvatar" alt="" />
          <span class="home-avatar-fallback" id="homeAvatarFallback">G</span>
        </span>
      </button>


      <a class="signin-inline"
         href="https://api.ellisandcodesigns.co.uk/auth/google/start"
         id="homeLoginBtn">Sign in</a>
    </div>

    <!-- Center -->
    <div class="appbar-center" aria-label="App">
      <img class="appbar-logo" src="/assets/icons/icon-192.png" alt="" />
      <span class="appbar-title">Gin Rummy Friends</span>
    </div>

    <!-- Right -->
    <div class="appbar-right">
      <button class="icon-ghost" id="homeRulesBtn" type="button" aria-label="Rules">?</button>
      <button class="icon-ghost" id="homeSettingsBtn" type="button" aria-label="Settings">‚öô</button>
    </div>
  </header>

  <!-- MAIN ACTIONS -->
  <main class="home-actions">
    <button class="action-tile" id="homePlayBtn" type="button">
      <div class="action-icon" aria-hidden="true">üÉè</div>
      <div class="action-label">Play</div>
    </button>

    <button class="action-tile" id="homeRoomsBtn" type="button">
      <div class="action-icon" aria-hidden="true">üîí</div>
      <div class="action-label">Rooms</div>
    </button>

    <button class="action-tile" id="homePracticeBtn" type="button">
      <div class="action-icon" aria-hidden="true">ü§ñ</div>
      <div class="action-label">Practice</div>
    </button>
  </main>

  <!-- BOTTOM BAR -->
  <nav class="home-tabbar" aria-label="Bottom navigation">
    <button class="tab-btn" id="homeLeaderboardBtn" type="button">
      <span class="tab-ic" aria-hidden="true">üèÜ</span>
      <span class="tab-txt">Leaderboard</span>
    </button>

    <button class="tab-btn" id="homeFriendsBtn" type="button">
      <span class="tab-ic" aria-hidden="true">üë•</span>
      <span class="tab-txt">Friends</span>
    </button>
  </nav>

  <!-- PROFILE MODAL (placeholder) -->
  <div class="modal-scrim" id="homeProfileModal" aria-hidden="true">
    <div class="modal-sheet" role="dialog" aria-modal="true" aria-label="Profile">
      <div class="modal-head">
        <div class="modal-title">Profile</div>
        <button class="icon-ghost" id="homeProfileCloseBtn" type="button" aria-label="Close">‚úï</button>
      </div>

      <div class="modal-body">
        <div class="modal-profile-row">
          <span class="profile-ring big">
            <img id="homeAvatarBig" alt="" />
          </span>
          <div class="modal-profile-meta">
            <div class="modal-name" id="homeName">Guest</div>
            <div class="modal-sub" id="homeHint">Sign in to sync your profile</div>
          </div>
        </div>

        <div class="modal-card">
          <div class="modal-card-title">Coming soon</div>
          <div class="modal-card-desc">Profile editing, stats, and cosmetic badges.</div>
        </div>

        <button class="btn btn-ghost full" id="homeLogoutBtn" type="button" style="display:none;">
          Sign out
        </button>
      </div>
    </div>
  </div>
</section>


  <!---------- CREATE GAME SCREEN ----------->
<div id="screen-create" class="screen hidden app-chrome">

  <!-- TOP BAR (IDENTICAL TO HOME) -->
  <header class="home-appbar">
    <div class="appbar-left">
      <button class="home-profile-btn" id="createProfileBtn" type="button">
        <span class="home-game-profile-icon">
          <img id="createAvatar" alt="" />
          <span class="home-avatar-fallback" id="createAvatarFallback">G</span>
        </span>
      </button>

      <a class="signin-inline"
         href="https://api.ellisandcodesigns.co.uk/auth/google/start"
         id="createLoginBtn">Sign in</a>
    </div>

    <div class="appbar-center">
      <img class="appbar-logo" src="/assets/icons/icon-192.png" alt="" />
      <span class="appbar-title">Rooms</span>
    </div>

    <div class="appbar-right">
      <button class="icon-ghost">?</button>
      <button class="icon-ghost">‚öô</button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="ui-stack">
    <div class="ui-card">
      

      <div class="ui-card-title">Create Room</div>
      <div class="ui-card-sub">Choose players and target score.</div>

      <div class="lobby-stack">
        <div class="segmented">
          <button id="players2Btn" class="seg-btn active">2</button>
          <button id="players4Btn" class="seg-btn">4</button>
        </div>

        <div class="pill points-pill">
          <div class="pill-text">POINTS TARGET</div>
          <div class="pill-points">
            <button id="points10Btn" class="points-btn">10</button>
            <button id="points50Btn" class="points-btn">50</button>
            <button id="points100Btn" class="points-btn">100</button>
          </div>
          <div class="pill-suit">‚ô†</div>
        </div>

        <button id="createGameBtn" class="btn btn-primary">Create</button>
        <button id="createBackHomeBtn" class="btn btn-ghost full" type="button">
        ‚Üê Back
      </button>
        <button id="goJoinBtn" class="btn btn-secondary">Have a code? Join</button>
      </div>
    </div>
  </main>

  <!-- BOTTOM BAR (IDENTICAL TO HOME) -->
  <nav class="home-tabbar">
    <button class="tab-btn"><span class="tab-ic">üèÜ</span><span class="tab-txt">Leaderboard</span></button>
    <button class="tab-btn"><span class="tab-ic">üë•</span><span class="tab-txt">Friends</span></button>
  </nav>
</div>



<!-- WAITING ROOM (Host) -->

<div id="screen-host" class="screen hidden app-chrome">

  <header class="home-appbar">
    <div class="appbar-left">
      <button class="home-profile-btn">
        <span class="home-game-profile-icon">
          <span class="home-avatar-fallback">G</span>
        </span>
      </button>
    </div>

    <div class="appbar-center">
      <img class="appbar-logo" src="/assets/icons/icon-192.png" />
      <span class="appbar-title">Room</span>
    </div>

    <div class="appbar-right">
      <button class="icon-ghost">?</button>
      <button class="icon-ghost">‚öô</button>
    </div>
  </header>

  <main class="ui-stack">
    <div class="ui-card">

      <div class="ui-card-title">Room Code</div>
      <div class="ui-card-sub" id="playerCountText">Players: 1/2</div>

      <div id="roomCodeSection" class="room-code-row">
        <div class="room-code-text">ROOM CODE</div>
        <div class="code-box">
          <div id="roomCodeText" class="room-code"></div>
          <button id="copyCodeBtn" class="btn btn-secondary">Copy</button>
        </div>
      </div>

      <p id="waitingStatus" class="waiting-status">Waiting for players‚Ä¶</p>

      <button id="startGameBtn"
              class="btn btn-primary"
              style="display:none;"
              disabled>
        Start
      </button>

      <!-- BACK (inside content) -->
      <button id="hostBackBtn" class="btn btn-ghost full">‚Üê Back</button>
    </div>
  </main>

  <nav class="home-tabbar">
    <button class="tab-btn"><span class="tab-ic">üèÜ</span><span class="tab-txt">Leaderboard</span></button>
    <button class="tab-btn"><span class="tab-ic">üë•</span><span class="tab-txt">Friends</span></button>
  </nav>
</div>


<!---------- JOIN SCREEN ----------->
<div id="screen-join" class="screen hidden app-chrome">

  <header class="home-appbar">
    <div class="appbar-left">
      <button class="home-profile-btn">
        <span class="home-game-profile-icon">
          <span class="home-avatar-fallback">G</span>
        </span>
      </button>
    </div>

    <div class="appbar-center">
      <img class="appbar-logo" src="/assets/icons/icon-192.png" />
      <span class="appbar-title">Join Room</span>
    </div>

    <div class="appbar-right">
      <button class="icon-ghost">?</button>
      <button class="icon-ghost">‚öô</button>
    </div>
  </header>

  <main class="ui-stack">
    <div class="ui-card">

      <div class="ui-card-title">Enter Code</div>
      <div class="ui-card-sub">Ask your friend for the room code.</div>

      <input id="joinCodeInput"
             class="ui-input"
             type="text"
             maxlength="6"
             placeholder="XXXXXX" />

      <button id="joinGameBtn" class="btn btn-primary">Join</button>
      <!-- BACK (inside content) -->
      <button id="backToCreateBtnDup" class="btn btn-ghost full">‚Üê Back</button>

      <!-- hidden helper for your JS -->
      <button id="backToCreateBtn" style="display:none;"></button>
    </div>
  </main>

  <nav class="home-tabbar">
    <button class="tab-btn"><span class="tab-ic">üèÜ</span><span class="tab-txt">Leaderboard</span></button>
    <button class="tab-btn"><span class="tab-ic">üë•</span><span class="tab-txt">Friends</span></button>
  </nav>
</div>


  <!---------- GAME SCREEN ----------->

  <div id="screen-game" class="screen hidden">

      <div class="game-shell">
          
          
        <button id="leaveGameBtn" class="leave-btn">Leave Game</button> 


        
        <div class="table">

          <div class="player-anchors" id="playerAnchors">

            <div class="player-seat seat-top" data-seat="top"></div>
            <div class="player-seat seat-right" data-seat="right"></div>
            <div class="player-seat seat-bottom" data-seat="bottom"></div>
            <div class="player-seat seat-left" data-seat="left"></div>

          </div>

          <div class="table-inner">

            <div id="turn-indicator" class="turn-indicator">
                           
              <div class="turn-gin-wrap">
                <button class="turn-indicator-gin" type="button" id="ginBtn">GIN</button>
              </div>
                            
              <div class="turn-indicator-rotor">
                  <div class="turn-indicator-ring">
                      <div class="turn-indicator-fill"></div>
                  </div>
                  <div class="turn-indicator-arrow"></div>
              </div>
                            
                           
            </div>

            <div class="center-pile">

              <div id="discard"></div>

              <div id="deck-wrap" class="deck-wrap">
                <div id="deck" class="card back">
                  <div id="deck-count" class="deck-count">0</div>
                </div>
              </div>

            </div>    

          </div>  

          <div id="hand"></div>

        </div>
    </div>


    
      <div id="match-overlay" class="overlay">
        
        <div class="champion-stage">
          <button id="leave-btn" class="leave-btn" type="button"> LEAVE </button>
            <!-- Top logo / title -->
            <div class="champion-title">
            <div class="champion-logo">Gin Rummy</div>
            <div class="champion-glow"></div>
            </div>

            <!-- VS panel -->
            <div class="vs-panel">
              <div class="vs-player left" id="match-p1">
                <div class="portrait-ring">
                  <div class="speech-bubble-container hidden" id="match-p1-ready">
                    <div class="speech-bubble">I'm Ready!</div>
                  </div>
                  <div class="portrait" id="match-p1-avatar">P1</div>
                  <div class="winner-ribbon" id="match-p1-ribbon">
                      <span>WINNER</span>
                  </div>
                </div>
                <div class="player-score" id="match-p1-score">0</div>
              </div>

              <div class="vs-center">
                  <div class="vs-badge">VS</div>
              </div>

              <div class="vs-player right" id="match-p2">
                  <div class="portrait-ring">
                    <div class="speech-bubble-container hidden" id="match-p2-ready">
                    <div class="speech-bubble">I'm Ready!</div>
                  </div>
                      <div class="portrait" id="match-p2-avatar">P2</div>
                      <div class="winner-ribbon" id="match-p2-ribbon">
                          <span>WINNER</span>
                      </div>
                      <div class="level-badge" id="match-p2-level">‚òÖ</div>
                  </div>
                  <div class="player-score" id="match-p2-score">0</div>
                </div>
              </div>

              <!-- Bottom bar -->
              <div class="result-bar">
            
              <div class="result-actions">

                <div id="rematch-status" class="rematch-status"></div>
                <div class="match-actions">
                  <button id="rematch-btn" class="rematch-btn primary-btn" type="button">REMATCH</button>
                  <div id="rematch-countdown" class="rematch-countdown hidden"></div>
                </div>

              </div>
            </div>
      </div>
    </div>


        
      <div id="round-overlay" class="overlay hidden">

        <div class="overlay-card round-card">
          
          <button id="roundLeaveBtn" class="leave-btn">Leave Game</button>
         
            <div class="round-panel">

                <!-- ROW ONE TOP TITLES -->
                <div class="round-panel-row-title">
                    <div class="deadwood-title">REMAINING CARDS</div>
                    <div class="melds-title">MELDS</div>
                </div>


                <!-- ROW TWO-->
                <div class="round-panel-row">

                    <div id="deadwood-area">
                       <div class="deadwood-strip"></div>
                    </div>


                    <div class="opp-meld-area" id="opp-hand-meld"></div>

                </div> <!-- ROUND PANEL ROW -->

                <!-- ROW THREE-->
                <div class="round-panel-row">

                    <div id="you-deadwood-area">
                      <div class="deadwood-strip"></div>
                    </div>


                    <div class="you-meld-area" id="you-hand-meld"></div> 

                </div> <!-- ROUND PANEL ROW -->

                <!-- ROW FOUR BOTTOM TITLES -->
                <div class="round-panel-row-bottom">
                    <div class="deadwood-title">REMAINING CARDS</div>
                    <div class="melds-title">MELDS</div>
                </div> <!-- ROUND PANEL ROW TITLE-->

            </div> <!-- ROUND PANEL ROW -->
            <div class="round-column">
                <div class="player1-icon player-profile">
                    <div class="profile-icon">
                      P2
                      <div class="round-meta">
                          <div class="pill">
                            <span id="opp-deadwood-points"></span>
                          </div>
                        </div>
                    </div>
                    <div class="icon-points"></div>
                    
                </div>
                <div class="player2-icon player-profile">
                    <div class="profile-icon">
                      YOU
                      <div class="round-meta">
                          <div class="pill">
                            <span id="you-deadwood-points"></span>
                          </div>
                      </div>
                    </div>
                    <div class="icon-points"></div>
                    
                </div>
            </div> <!-- ROUND COLUMN-->
            </div> <!-- ROUND PANEL-->

      </div> <!-- ROUND OVER LAY -->

    <div id="leave-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="leaveModalTitle">
    <div class="modal-backdrop"></div>

    <div class="modal-card">
      <div class="modal-title" id="leaveModalTitle">Leave game?</div>
      <div class="modal-body">
        If you leave now, you‚Äôll exit the room and return to the menu.
      </div>

      <div class="modal-actions">
        <button type="button" class="btn btn-ghost" id="leaveCancelBtn">Cancel</button>
        <button type="button" class="btn btn-danger" id="leaveConfirmBtn">Leave</button>
      </div>
    </div>
</div>

    

    </div>

  </div>

  

<!---------- JAVASCRIPT ----------->

<script src="/js/core/router.js"></script>

<script src="/js/game-state.js"></script>
<script src="/js/meld-visuals.js"></script>

<script src="/js/game/ui-elements.js"></script>
<script src="/js/game/ui-helpers.js"></script>
<script src="/js/game/turn-indicator.js"></script>
<script src="/js/game/anim-draw-discard.js"></script>
<script src="/js/game/anim-deal.js"></script>
<script src="/js/game/anim-opponent.js"></script>
<script src="/js/game/round-reveal.js"></script>
<script src="/js/game/rendering.js"></script>
<script src="/js/game/drag-drop.js"></script>
<script src="/js/game/lobby-ui.js"></script>
<script src="/js/game/socket-handler.js"></script>

<script type="module" src="/js/main.js"></script>


</body>
</html>
